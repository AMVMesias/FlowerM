<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#87CEEB">
    <title>üåª Mayo üíï</title>
    <link rel="stylesheet" href="nuevo-girasol.css">
</head>
<body>
    <div class="container">
        <!-- Control de m√∫sica -->
        <div class="control-musica">
            <button id="btnMusica" class="btn-musica" onclick="toggleMusica()">
                üéµ M√∫sica
            </button>
        </div>

        <!-- Audio -->
        <audio id="musicaFondo" loop autoplay>
            <source src="musica.mp3" type="audio/mpeg">
            <source src="musica.ogg" type="audio/ogg">
            Tu navegador no soporta audio HTML5.
        </audio>

        <!-- Mensaje rom√°ntico -->
        <div class="mensaje-romantico">
            <h1 class="texto-amor">Te amo Mayo</h1>
            <div class="corazones">
                <span class="corazon">üíï</span>
                <span class="corazon">üíñ</span>
                <span class="corazon">üíï</span>
            </div>
        </div>

        <!-- Mensaje de m√∫sica centrado -->
        <div id="mensajeMusica" class="mensaje-musica-centro">
            üéµ ¬°Presiona el bot√≥n para activar m√∫sica! üéµ
        </div>

        <!-- Girasol principal -->
        <div class="girasol-contenedor">
            <div class="girasol">
                <!-- Centro del girasol -->
                <div class="centro-girasol">
                    <div class="semillas"></div>
                </div>
                
                <!-- P√©talos (generados por CSS) -->
                <div class="petalos">
                    <div class="petalo" style="--i: 1"></div>
                    <div class="petalo" style="--i: 2"></div>
                    <div class="petalo" style="--i: 3"></div>
                    <div class="petalo" style="--i: 4"></div>
                    <div class="petalo" style="--i: 5"></div>
                    <div class="petalo" style="--i: 6"></div>
                    <div class="petalo" style="--i: 7"></div>
                    <div class="petalo" style="--i: 8"></div>
                    <div class="petalo" style="--i: 9"></div>
                    <div class="petalo" style="--i: 10"></div>
                    <div class="petalo" style="--i: 11"></div>
                    <div class="petalo" style="--i: 12"></div>
                    <div class="petalo" style="--i: 13"></div>
                    <div class="petalo" style="--i: 14"></div>
                    <div class="petalo" style="--i: 15"></div>
                    <div class="petalo" style="--i: 16"></div>
                    <div class="petalo" style="--i: 17"></div>
                    <div class="petalo" style="--i: 18"></div>
                    <div class="petalo" style="--i: 19"></div>
                    <div class="petalo" style="--i: 20"></div>
                </div>
            </div>

            <!-- Tallo y hojas -->
            <div class="tallo">
                <div class="hoja hoja-izq"></div>
                <div class="hoja hoja-der"></div>
            </div>
        </div>

        <!-- Part√≠culas flotantes -->
        <div class="particulas">
            <div class="particula"></div>
            <div class="particula"></div>
            <div class="particula"></div>
            <div class="particula"></div>
            <div class="particula"></div>
        </div>

        <!-- Efectos de fondo m√°gicos -->
        <div class="efectos-fondo">
            <!-- Escarcha brillante -->
            <div class="escarcha">
                <div class="copo copo-1"></div>
                <div class="copo copo-2"></div>
                <div class="copo copo-3"></div>
                <div class="copo copo-4"></div>
                <div class="copo copo-5"></div>
                <div class="copo copo-6"></div>
                <div class="copo copo-7"></div>
                <div class="copo copo-8"></div>
                <div class="copo copo-9"></div>
                <div class="copo copo-10"></div>
            </div>

            <!-- Estrellas brillantes -->
            <div class="estrellas">
                <div class="estrella estrella-1">‚ú®</div>
                <div class="estrella estrella-2">‚≠ê</div>
                <div class="estrella estrella-3">üåü</div>
                <div class="estrella estrella-4">‚ú®</div>
                <div class="estrella estrella-5">‚≠ê</div>
                <div class="estrella estrella-6">üåü</div>
                <div class="estrella estrella-7">‚ú®</div>
                <div class="estrella estrella-8">‚≠ê</div>
            </div>

            <!-- Burbujas flotantes -->
            <div class="burbujas">
                <div class="burbuja burbuja-1"></div>
                <div class="burbuja burbuja-2"></div>
                <div class="burbuja burbuja-3"></div>
                <div class="burbuja burbuja-4"></div>
                <div class="burbuja burbuja-5"></div>
                <div class="burbuja burbuja-6"></div>
            </div>

            <!-- Rayos de luz -->
            <div class="rayos-luz">
                <div class="rayo rayo-1"></div>
                <div class="rayo rayo-2"></div>
                <div class="rayo rayo-3"></div>
            </div>
        </div>
    </div>

    <script>
        let musicaReproduciendo = false;
        const audio = document.getElementById('musicaFondo');
        const btnMusica = document.getElementById('btnMusica');
        const mensajeMusica = document.getElementById('mensajeMusica');

        function ocultarMensaje() {
            if (mensajeMusica) {
                mensajeMusica.style.opacity = '0';
                mensajeMusica.style.transform = 'translateY(20px) scale(0.8)';
                mensajeMusica.style.filter = 'blur(5px)';
                setTimeout(() => {
                    mensajeMusica.style.display = 'none';
                }, 600);
            }
        }

        // Ocultar mensaje autom√°ticamente despu√©s de 2 segundos
        setTimeout(() => {
            ocultarMensaje();
        }, 4000);

        function toggleMusica() {
            if (musicaReproduciendo) {
                audio.pause();
                btnMusica.innerHTML = 'üîá M√∫sica';
                btnMusica.classList.remove('reproduciendo');
                musicaReproduciendo = false;
            } else {
                audio.play().then(() => {
                    btnMusica.innerHTML = 'üéµ Pausar';
                    btnMusica.classList.add('reproduciendo');
                    musicaReproduciendo = true;
                    // Ocultar mensaje inmediatamente si el usuario activa la m√∫sica
                    if (mensajeMusica && mensajeMusica.style.display !== 'none') {
                        ocultarMensaje();
                    }
                }).catch(error => {
                    console.log('Error al reproducir audio:', error);
                    btnMusica.innerHTML = 'üéµ M√∫sica';
                });
            }
        }

        // Funci√≥n para intentar reproducir autom√°ticamente
        function intentarAutoplay() {
            audio.volume = 0.3; // Volumen al 30%
            audio.play().then(() => {
                musicaReproduciendo = true;
                btnMusica.innerHTML = 'üéµ Pausar';
                btnMusica.classList.add('reproduciendo');
                // Ocultar mensaje inmediatamente si autoplay funciona
                if (mensajeMusica && mensajeMusica.style.display !== 'none') {
                    ocultarMensaje();
                }
                console.log('Autoplay iniciado exitosamente');
            }).catch(error => {
                console.log('Autoplay bloqueado por el navegador:', error);
                btnMusica.innerHTML = 'üéµ M√∫sica';
                musicaReproduciendo = false;
                // El mensaje se ocultar√° autom√°ticamente despu√©s de 2 segundos
                
                // Configurar para reproducir en la primera interacci√≥n
                document.addEventListener('click', function() {
                    if (!musicaReproduciendo) {
                        toggleMusica();
                    }
                }, { once: true });
                
                document.addEventListener('touchstart', function() {
                    if (!musicaReproduciendo) {
                        toggleMusica();
                    }
                }, { once: true });
            });
        }

        // Intentar reproducir cuando la p√°gina carga
        window.addEventListener('load', function() {
            intentarAutoplay();
        });

        // Tambi√©n intentar cuando el DOM est√© listo
        document.addEventListener('DOMContentLoaded', function() {
            intentarAutoplay();
        });

        // Manejar el evento de carga del audio
        audio.addEventListener('canplaythrough', function() {
            if (!musicaReproduciendo) {
                intentarAutoplay();
            }
        });
    </script>
</body>
</html>